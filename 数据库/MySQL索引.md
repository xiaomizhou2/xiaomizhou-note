# 一、索引

#### 1.1 索引概述

- 索引是帮助MySQL高效获取数据的数据结构

  ![image-20210704222239119](https://gitee.com/zyx95ovo/pic-bed/raw/master/data/image-20210704222239119.png)

  一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储在磁盘上。索引是数据库中用来提高性能的最常用的工具。

#### 1.2 索引的优势劣势

**优势：**

- 类似于书籍的目录索引，提高数据检索的效率，降低数据库的IO成本
- 通过索引列对数据进行排序，降低数据排序成本，降低CPU的消耗

**劣势：**

- 实际上索引也是一张表，该表中保存了主键与索引字段，并指向实体类的记录，所以索引列也是要占空间的。
- 虽然索引大大提高了查询效率，同时也降低更新表的速度。

#### 1.3 索引数据结构

索引是在MySQL的存储引擎层中实现的，所以每种存储引擎的索引都不一定完全相同，也不是所有的存储引擎都支持所有的索引类型的。MySQL目前提供了以下4种索引：

- B-tree索引：最常见的索引类型，大部分索引都支持B数索引

- Hash索引：只有Memory引擎支持，使用场景简单。

- R-tree索引(空间索引)：空间索引是 **MyISAM** 引擎的一个特殊索引类型，主要用于地理空间数据类型。

- Full-text(全文索引)：全文索引也是 **MyISAM** 的一个特殊索引类型，主要用于全文索引，InnoDB从MySQL5.6版本开始支持全文索引

  ![image-20210704223908913](https://gitee.com/zyx95ovo/pic-bed/raw/master/data/image-20210704223908913.png)

我们平常说的索引一般都是指B+树结构组织的索引。其中聚集索引、复合索引、前缀索引、唯一索引默认都是使用B+tree树索引，统称为索引。

##### 1.3.1 B-tree 结构

B-tree又叫多路平衡搜索树，一颗m叉的B-tree特性如下：

- 树中每个节点最多包含m个子节点
- 除根节点和叶子节点外，每个节点至少有**[ceil(m/2)]**个子节点
- 若根节点不是叶子节点，则至少有两个子节点
- 所有的叶子节点都在同一层
- 每个非叶子节点由n个key与n+1个指针组成，其中**[ceil(m/2)-1] <= n <= m-1**

