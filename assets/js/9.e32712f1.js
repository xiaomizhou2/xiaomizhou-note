(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{423:function(s,t,a){"use strict";a.r(t);var e=a(62),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker-安装mysql和redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装mysql和redis"}},[s._v("#")]),s._v(" docker 安装mysql和redis")]),s._v(" "),a("h2",{attrs:{id:"_1-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql"}},[s._v("#")]),s._v(" 1.mysql")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建实例并启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":3306 --name mysql -v /mydata/mysql/log:/var/log/mysql -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root -d mysql:5.7\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 将容器的3306端口映射到主机的3306端口")]),s._v("\n\t-p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":3306  \n\t实体机目录:容器内目录\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 将日志文件夹挂载到实体机")]),s._v("\n\t-v /mydata/mysql/log:/var/log/mysql\n \n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 将数据data文件夹挂载到实体机")]),s._v("\n\t-v /mydata/mysql/data:/var/lib/mysql\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 将配置文件夹挂载到实体机")]),s._v("\n\t-v /mydata/mysql/conf:/etc/mysql\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 设置root账户密码")]),s._v("\n\t-e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n")])])]),a("h2",{attrs:{id:"_2-redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-redis"}},[s._v("#")]),s._v(" 2.Redis")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 避坑 外部不创建redis.conf文件 会把这个当成目录 所以预先创建conf文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /mydata/redis/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /mydata/redis/conf/redis.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建实例启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 --name redis -v /mydata/redis/data:/data -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf -d redis redis-server /etc/redis/redis.conf\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16379")]),s._v(":6379 --name redis -v /home/ubuntu/docker-data/redis/data:/data -v /home/ubuntu/docker-data/redis/conf/redis.conf:/etc/redis/redis.conf -d redis redis-server /etc/redis/redis.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据持久化设置 redis.conf里增加")]),s._v("\nappendonly "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" --启动AOF的持久化策略\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);